# GitHub Secrets 配置详细指南

## 🎯 配置目标

配置GitHub Secrets，让GitHub Actions能够：
- ✅ 自动运行股票分析脚本
- ✅ 发送邮件通知买卖信号
- ✅ 保存分析结果和图表

## 📋 需要配置的Secrets

| Secret名称 | 说明 | 示例值 | 是否必须 |
|------------|------|--------|----------|
| `QQ_EMAIL` | 发件人QQ邮箱地址 | 123456@qq.com | ✅ |
| `AUTH_CODE` | QQ邮箱SMTP授权码 | abcdef123456 | ✅ |
| `RECEIVER` | 接收邮件的邮箱地址 | receiver@example.com | ✅ |

## 🔑 详细配置步骤

### 第一步：获取QQ邮箱SMTP授权码

1. **登录QQ邮箱网页版**
   - 访问 https://mail.qq.com
   - 登录你的QQ邮箱

2. **进入设置页面**
   - 点击右上角的「设置」⚙️
   - 选择「账户」选项卡

3. **开启SMTP服务**
   - 找到「POP3/SMTP服务」
   - 点击「开启」按钮
   - 按照提示发送短信验证

4. **获取授权码**
   - 验证成功后，系统会显示16位授权码
   - **重要：立即复制保存这个授权码！**
   - ⚠️ 注意：这不是你的QQ密码，是专用的SMTP授权码

### 第二步：进入GitHub Secrets设置

1. **打开你的GitHub仓库**
   - 确保你已经推送了代码到GitHub

2. **进入Settings页面**
   - 点击仓库顶部的「Settings」选项卡

3. **找到Secrets设置**
   - 在左侧菜单中找到「Secrets and variables」
   - 点击「Actions」子菜单

### 第三步：添加Secrets

#### 添加 QQ_EMAIL

1. 点击绿色的「New repository secret」按钮
2. **Name**: 输入 `QQ_EMAIL`
3. **Secret**: 输入你的QQ邮箱地址（例如：123456@qq.com）
4. 点击「Add secret」保存

#### 添加 AUTH_CODE

1. 再次点击「New repository secret」
2. **Name**: 输入 `AUTH_CODE`
3. **Secret**: 输入刚才获取的16位SMTP授权码
4. 点击「Add secret」保存

#### 添加 RECEIVER

1. 再次点击「New repository secret」
2. **Name**: 输入 `RECEIVER`
3. **Secret**: 输入接收邮件的邮箱地址（可以是你自己的其他邮箱）
4. 点击「Add secret」保存

## ✅ 验证配置

### 方法一：使用测试工作流

1. 进入GitHub仓库的「Actions」页面
2. 选择「测试邮件功能」工作流
3. 点击「Run workflow」绿色按钮
4. 等待运行完成，检查是否收到测试邮件

### 方法二：推送代码触发

1. 在本地做任何小的修改（比如更新README.md）
2. 提交并推送到main分支
3. 进入Actions页面查看是否自动触发运行

## 🔍 常见问题排查

### ❌ 没有收到邮件

**检查清单：**
- [ ] Secrets是否正确配置
- [ ] QQ邮箱是否开启SMTP服务
- [ ] 授权码是否正确（不是QQ密码）
- [ ] 接收邮箱地址是否正确
- [ ] 检查垃圾邮件文件夹

### ❌ GitHub Actions运行失败

**检查清单：**
- [ ] 查看运行日志中的错误信息
- [ ] 确认代码已推送到GitHub
- [ ] 检查Python脚本是否有语法错误
- [ ] 确认依赖包是否正确安装

### ❌ 授权码获取失败

**解决方案：**
- 确保QQ邮箱已绑定手机号
- 检查手机是否能正常接收短信
- 尝试使用其他浏览器
- 联系QQ邮箱客服

## 📊 配置成功后的效果

### 自动运行
- 每次推送到main分支时自动分析股票数据
- 每天上午9:00和下午15:30定时运行
- 生成图表并保存到Artifacts

### 邮件通知
- 当60日线比例达到买卖阈值时发送邮件
- 邮件包含详细的分析结果和图表
- 可以自定义买卖阈值（默认买入30%，卖出70%）

## 🎨 可视化配置流程图

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  获取QQ授权码    │───▶│  配置GitHub     │───▶│  测试验证        │
│                 │    │    Secrets      │    │                 │
│ 1. 登录QQ邮箱    │    │                 │    │ 1. 运行测试工作流  │
│ 2. 开启SMTP     │    │ 1. QQ_EMAIL     │    │ 2. 推送代码测试    │
│ 3. 获取授权码    │    │ 2. AUTH_CODE    │    │ 3. 检查邮件接收    │
│                 │    │ 3. RECEIVER     │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🚀 下一步

配置完成后，你的股票分析系统将：
- ✅ 自动监控股票板块60日线比例
- ✅ 达到买卖信号时自动发送邮件
- ✅ 生成可视化图表
- ✅ 保存历史分析结果

现在你可以开始享受自动化的股票分析服务了！🎉